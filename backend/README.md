# Bingo Backend

クリスマスビンゴ大会システムのバックエンドサーバーです。
Rust (Axum) で実装されており、高速かつ堅牢なAPIを提供します。

## 🚀 機能

*   **ビンゴ抽選**: 1〜75の数字をランダムに抽選し、重複なく提供します。
*   **あみだくじ**: 参加者と景品をランダムに紐付けるあみだくじロジックを提供します。
*   **状態管理**: メモリ上でゲームの状態（履歴、残りの数字など）を保持します。
*   **再現性**: 外部ファイル (`seeds.txt`) からシード値を読み込み、乱数生成の再現性を担保します。

## 🛠️ 技術スタック

*   **言語**: Rust
*   **Webフレームワーク**: Axum 0.7
*   **非同期ランタイム**: Tokio
*   **シリアライズ**: Serde (JSON)

## 📦 セットアップと実行

### 前提条件
*   Rust (最新の安定版) がインストールされていること。

### 起動

```bash
# 開発モードで起動（ホットリロード等はcargo-watch推奨）
cargo run

# リリースビルドで起動（高速化）
cargo run --release
```

サーバーはデフォルトで `0.0.0.0:3000` でリッスンします。

### 設定ファイル (`seeds.txt`)

プロジェクトルート（`backend/` 直下）に `seeds.txt` を配置することで、乱数シードを制御できます。
ファイル内の数値を全て掛け合わせた値がシードとして使用されます。

```text
123
456
789
```

ファイルが存在しない場合は、デフォルトのシード値が使用されます。

## 📚 API エンドポイント

詳細な仕様は `../docs/API_SPEC.md` を参照してください。

| メソッド | パス | 説明 |
| :--- | :--- | :--- |
| `GET` | `/next_number` | 次のビンゴ番号を引く |
| `POST` | `/reset` | ゲームをリセットする |
| `GET` | `/amida` | あみだくじの設定（参加者名）を取得 |
| `POST` | `/amida` | あみだくじの設定を更新 |
| `GET` | `/amida/result` | あみだくじの結果を取得 |

## 🧪 テスト

```bash
cargo test
```

ドメインロジック（`domain.rs`）や乱数生成器（`rng.rs`）の単体テストが実行されます。
